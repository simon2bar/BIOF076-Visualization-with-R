---
title: "extending ggplot"
output: html_notebook
---

## gapminder and ggpattern
```{r}
 gapminder_ss <- read_tsv('../src/gapminder_2007.tsv.gz')
 gapminder_bygender <- gapminder_ss %>% 
     mutate(gender = sample(c('male', 'female'), nrow(gapminder_ss), replace = T))
```

- I've added some data about gender to the `gapminder` dataset. use this data set to calculate the average lifespan per continent per gender. plot a bargraph with colors for each continents and patterns for each gender. 
- hint: becasue the data is averaged, you will be using `geom_col`

```{r}
 remotes::install_github("coolbutuseless/ggpattern")
```

## revisting the line graph from earlier with `ggpubr`

![](../src/reporter_assay_plot.png)
Remember this plot?
use `ggline` to remake the line graph we made a few exercises ago

```{r}

```

filter the data to the last time point, and make a boxplot with `ggboxplot`. Include a test for a statstically significant change in the data on the plot. 
```{r}

```


## gganimate
- continuing with the gapminder dataset, remake the bubble plot we made yesterday. We'll be using the full dataset this time, and have data for many years. Create an animated version of the bubble plots we made earlier to visualize changes across time. 
- customize the plots with some themes and palettes from 

```{r}
p <- ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
  geom_point(alpha = 0.5, show.legend = FALSE) +
  scale_colour_manual(values = country_colors) +
  scale_size(range = c(2, 12)) +
  scale_x_log10() +
  facet_wrap(~continent) +
  # Here comes the gganimate specific bits
  labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
  transition_time(year) +
  ease_aes('linear')
anim_save('../src/gapminder_bubble_animated.gif', p)
```

## plotting with maps 

Lets make a plot with some real data. We're gonna be working with some data about COVID-19 testing in maryland. 
'day_2/MD_COVID_cases_by_zip.tsv.gz' contains the per day number of positive covid cases by zip code for about 160 days in the state of maryland. 
'day_2/maryland_zipcode_to_county.tsv.gz' contains a mapping for maryland zip code to counties
'day_2/maryland_counties.shp' is a shapefile for counties in maryland

Were going to take this data and make this:


As a starting point, this is the generaly workflow. Load data > join county level data to zip level data > aggreagte data to the county level  >  join map data > make animation 


- first add the county information to the covid data. check how many counties are shared between the covid data and the map data 
```{r}

```


- aggregate zip level covid data to county level
```{r}

```

- the character date to a DateTime vector
```{r}

```


- add the map data to the covid data. filter out the date '2020-05-21' and plot it 
```{r}

```

